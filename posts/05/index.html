<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Leopold Götsch">
<meta name="dcterms.date" content="2024-09-26">

<title>GreenTechEngineering - 04 Erneuerbare Energiequellen: Photovoltaik</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">GreenTechEngineering</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">04 Erneuerbare Energiequellen: Photovoltaik</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">04 Erneuerbare Energiequellen: Photovoltaik</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">news</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Leopold Götsch </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 26, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview-of-renewable-energy-sources" id="toc-overview-of-renewable-energy-sources" class="nav-link active" data-scroll-target="#overview-of-renewable-energy-sources"><span class="header-section-number">1</span> Overview of Renewable Energy Sources</a>
  <ul class="collapse">
  <li><a href="#solar-energy" id="toc-solar-energy" class="nav-link" data-scroll-target="#solar-energy"><span class="header-section-number">1.1</span> Solar Energy</a></li>
  <li><a href="#wind-energy" id="toc-wind-energy" class="nav-link" data-scroll-target="#wind-energy"><span class="header-section-number">1.2</span> Wind Energy</a></li>
  <li><a href="#hydropower" id="toc-hydropower" class="nav-link" data-scroll-target="#hydropower"><span class="header-section-number">1.3</span> Hydropower</a></li>
  <li><a href="#biomass-energy" id="toc-biomass-energy" class="nav-link" data-scroll-target="#biomass-energy"><span class="header-section-number">1.4</span> Biomass Energy</a></li>
  <li><a href="#geothermal-energy" id="toc-geothermal-energy" class="nav-link" data-scroll-target="#geothermal-energy"><span class="header-section-number">1.5</span> Geothermal Energy</a></li>
  <li><a href="#ocean-energy" id="toc-ocean-energy" class="nav-link" data-scroll-target="#ocean-energy"><span class="header-section-number">1.6</span> Ocean Energy</a></li>
  <li><a href="#hydrogen-energy" id="toc-hydrogen-energy" class="nav-link" data-scroll-target="#hydrogen-energy"><span class="header-section-number">1.7</span> Hydrogen Energy</a></li>
  <li><a href="#nuclear-fusion" id="toc-nuclear-fusion" class="nav-link" data-scroll-target="#nuclear-fusion"><span class="header-section-number">1.8</span> Nuclear Fusion</a></li>
  <li><a href="#biofuels" id="toc-biofuels" class="nav-link" data-scroll-target="#biofuels"><span class="header-section-number">1.9</span> Biofuels</a></li>
  <li><a href="#hydrogen-fuel-cells" id="toc-hydrogen-fuel-cells" class="nav-link" data-scroll-target="#hydrogen-fuel-cells"><span class="header-section-number">1.10</span> Hydrogen Fuel Cells</a></li>
  <li><a href="#solar-fuels" id="toc-solar-fuels" class="nav-link" data-scroll-target="#solar-fuels"><span class="header-section-number">1.11</span> Solar Fuels</a></li>
  </ul></li>
  <li><a href="#assignment" id="toc-assignment" class="nav-link" data-scroll-target="#assignment"><span class="header-section-number">2</span> Assignment</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="overview-of-renewable-energy-sources" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Overview of Renewable Energy Sources</h1>
<p>Renewable energy sources are essential for a sustainable future, providing clean, abundant, and reliable alternatives to fossil fuels. Here is an overview of the main renewable energy sources and their applications.<br>
The list does not claim to be exhaustive but provides an overview of the most common and promising renewable energy technologies.</p>
<section id="solar-energy" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="solar-energy"><span class="header-section-number">1.1</span> Solar Energy</h2>
<ul>
<li>Photovoltaic (PV) Systems: Solar panels convert sunlight into electricity through the photovoltaic effect. PV systems are widely used in residential, commercial, and utility-scale applications to generate clean energy.</li>
<li>Concentrated Solar Power (CSP): CSP systems use mirrors or lenses to concentrate sunlight onto a receiver, which converts solar energy into heat. The heat is then used to generate electricity through a steam turbine or heat engine.</li>
<li>Solar Water Heating: Solar thermal collectors capture sunlight to heat water for residential, commercial, or industrial use. Solar water heating systems can reduce energy costs and carbon emissions associated with water heating.</li>
</ul>
</section>
<section id="wind-energy" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="wind-energy"><span class="header-section-number">1.2</span> Wind Energy</h2>
<ul>
<li>Onshore Wind Turbines: Wind turbines convert wind energy into electricity through the rotation of turbine blades. Onshore wind farms are installed on land and are a cost-effective solution for renewable power generation.</li>
<li>Offshore Wind Turbines: Offshore wind farms are located in bodies of water, where wind speeds are typically higher and more consistent. Offshore wind turbines can generate more electricity than onshore turbines but require additional infrastructure and maintenance.</li>
</ul>
</section>
<section id="hydropower" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="hydropower"><span class="header-section-number">1.3</span> Hydropower</h2>
<ul>
<li>Conventional Hydropower: Hydropower plants use the energy of flowing water to generate electricity. Water is stored in reservoirs or diverted through turbines to produce mechanical energy, which is then converted into electricity.</li>
<li>Pumped Storage Hydropower: Pumped storage plants store excess electricity by pumping water to a higher reservoir during periods of low demand. When electricity demand is high, water is released to generate power through turbines.</li>
</ul>
</section>
<section id="biomass-energy" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="biomass-energy"><span class="header-section-number">1.4</span> Biomass Energy</h2>
<ul>
<li>Bioenergy: Biomass energy is derived from organic materials such as wood, agricultural residues, and waste. Bioenergy can be used for heating, electricity generation, and transportation fuels, providing a renewable alternative to fossil fuels.</li>
<li>Biogas: Biogas is produced through the anaerobic digestion of organic waste, such as food scraps and manure. Biogas can be used for cooking, heating, and electricity generation, reducing methane emissions from landfills and livestock operations.</li>
</ul>
</section>
<section id="geothermal-energy" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="geothermal-energy"><span class="header-section-number">1.5</span> Geothermal Energy</h2>
<ul>
<li>Geothermal Power Plants: Geothermal energy is harnessed from the heat of the Earth’s crust to generate electricity. Geothermal power plants use steam or hot water from underground reservoirs to drive turbines and produce clean, baseload power.</li>
<li>Geothermal Heat Pumps: Geothermal heat pumps use the stable temperature of the ground to heat and cool buildings efficiently. Ground-source heat pumps transfer heat between the ground and a building to provide space heating, cooling, and hot water.</li>
</ul>
<p><strong>Technologies under development or not yet fully commercialized:</strong></p>
</section>
<section id="ocean-energy" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="ocean-energy"><span class="header-section-number">1.6</span> Ocean Energy</h2>
<ul>
<li>Wave Energy: Wave energy converters capture the kinetic energy of ocean waves to generate electricity. Wave energy is a promising renewable resource with the potential to provide clean power to coastal regions.</li>
<li>Tidal Energy: Tidal turbines harness the energy of tidal currents to generate electricity. Tidal energy is predictable and reliable, making it a valuable source of renewable power for coastal communities.</li>
</ul>
</section>
<section id="hydrogen-energy" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="hydrogen-energy"><span class="header-section-number">1.7</span> Hydrogen Energy</h2>
<ul>
<li>Green Hydrogen: Green hydrogen is produced through the electrolysis of water using renewable electricity. Electrolyzers split water into hydrogen and oxygen, producing a clean fuel that can be used for transportation, energy storage, and industrial applications.</li>
</ul>
</section>
<section id="nuclear-fusion" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="nuclear-fusion"><span class="header-section-number">1.8</span> Nuclear Fusion</h2>
<ul>
<li>Fusion Reactors: Nuclear fusion is a clean and abundant energy source that replicates the process that powers the sun. Fusion reactors use hydrogen isotopes to generate energy through nuclear fusion, producing minimal waste and no greenhouse gas emissions. Fusion energy has the potential to provide a safe and sustainable energy supply for the future.</li>
</ul>
</section>
<section id="biofuels" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="biofuels"><span class="header-section-number">1.9</span> Biofuels</h2>
<ul>
<li>Bioethanol: Bioethanol is a renewable fuel produced from biomass feedstocks such as corn, sugarcane, and cellulosic materials. Bioethanol can be blended with gasoline to reduce greenhouse gas emissions from transportation and provide a sustainable alternative to fossil fuels.</li>
</ul>
</section>
<section id="hydrogen-fuel-cells" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="hydrogen-fuel-cells"><span class="header-section-number">1.10</span> Hydrogen Fuel Cells</h2>
<ul>
<li>Fuel Cell Vehicles: Hydrogen fuel cells convert hydrogen gas into electricity through an electrochemical process, powering vehicles with zero emissions. Fuel cell vehicles offer a clean alternative to internal combustion engines and can help reduce air pollution and dependence on fossil fuels.</li>
</ul>
</section>
<section id="solar-fuels" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="solar-fuels"><span class="header-section-number">1.11</span> Solar Fuels</h2>
<ul>
<li>Artificial Photosynthesis: Solar fuels are produced through artificial photosynthesis, a process that mimics natural photosynthesis to convert sunlight, water, and carbon dioxide into fuels such as hydrogen and hydrocarbons. Solar fuels offer a sustainable energy storage solution for renewable power systems.</li>
</ul>
</section>
</section>
<section id="assignment" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Assignment</h1>
<p>Sort the renewable energy sources into the following categories and provide reliable sources for each category: - World wide contribution to energy supply<br>
- State of development</p>
<p>Present your results in a table format.</p>



</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>